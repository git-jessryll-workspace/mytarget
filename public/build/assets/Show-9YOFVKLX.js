import{j as e,q as p,r as o,W as w,b as C,a as k}from"./app-bbybQd69.js";import{D as v,A as L}from"./AuthenticatedLayout-pGTZRN85.js";import{Q as D}from"./PencilSquareIcon-92KiC_2P.js";import{N as b}from"./NavPanel-IwVsULTp.js";import{d as _}from"./date-olAZvHKQ.js";import{E as P,D as S,C as q}from"./DeleteProjectForm-81fWrjKM.js";import{C as E}from"./CreateBoardForm-FYlntZhX.js";import{S as N,M as f,D as F}from"./DangerButton-iMjMiVDv.js";import{T as g}from"./TableList-VSFuXmG4.js";import{I as j}from"./InputLabel-QtIa3tK5.js";import{P as $}from"./PrimaryButton-HcZK7G6X.js";import{T as y}from"./TextInput-KKaGII3y.js";import"./DeleteClientForm-zcw5H5Fo.js";import"./transition-bxOOpJ-n.js";import"./dialog-J54nP1Pr.js";import"./ErrorInput-leVUgBdI.js";const T=({priority_level:r})=>({3:e.jsx("span",{className:"bg-red-500 text-white px-2 py-1 rounded-full text-xs uppercase font-bold",children:"High"}),2:e.jsx("span",{className:"bg-yellow-600 text-white px-2 py-1 rounded-full text-xs uppercase font-bold",children:"Medium"}),1:e.jsx("span",{className:"bg-gray-500 px-2 py-1 rounded-full text-xs uppercase font-bold",children:"Low"}),0:null})[r],O=({task:r,setShow:n})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-b border-gray-400 dark:border-gray-300 pb-2",children:e.jsx("h3",{className:"text-xl font-bold",children:"Task"})}),e.jsxs("div",{className:"pt-6 flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:r.name}),e.jsx("h5",{className:"text-sm",children:r.project_name})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{children:e.jsx(T,{priority_level:r.priority_level})})})]}),e.jsx("div",{className:"pt-3 h-[50dvh] overflow-y-auto",children:e.jsx("div",{className:"text-left text-sm",dangerouslySetInnerHTML:{__html:r.description}})}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx("div",{children:e.jsx(N,{onClick:()=>n(!1),children:"Close"})})})]}),I=()=>{const{projects:r,search_query_project:n}=p().props,[c,i]=o.useState([]),[s,a]=o.useState(null),[m,d]=o.useState(!1),[x,h]=o.useState(!1);o.useEffect(()=>{i(r.data)},[]);const l=u=>{i(u.data)},t=c.map(u=>({id:`#${u.id}`,project_name:u.project_name,updated_date:_(u.updated_at),status:u.active===1?"Active":"Inactive",action:e.jsx(v,{actionObject:{edit:{action:()=>{a(u),d(!0)},label:"Edit"},delete:{action:()=>{a(u),h(!0)},label:"Delete"}}})}));return e.jsxs(e.Fragment,{children:[e.jsx(f,{show:m,maxWidth:"md",children:e.jsx(P,{updateList:l,project:s,setShowEdit:d,skipClientSelect:!0})}),e.jsx(f,{show:x,maxWidth:"md",children:e.jsx(S,{updateList:l,projectId:s==null?void 0:s.id,setShowDelete:h})}),e.jsxs("div",{className:"pt-6",children:[e.jsx(b,{keyProps:"projects",updateList:l,data:r,CreateForm:q,search_query:n,routeControl:"clients.show",search_query_key:"search_query_project"}),e.jsx("div",{className:"h-[calc(100dvh-240px)] overflow-y-auto -mr-5 pr-3 mt-3 overflow-x-auto",children:e.jsx(g,{theadObject:{id:"#",project_name:"Project Name",updated_date:"Updated Date",status:"Status",action:""},items:t})})]})]})},M=I,A=({contactId:r,setShowDelete:n,updateList:c})=>{console.log(r);const{client:i}=p().props,{setData:s,delete:a,reset:m}=w({client_id:i==null?void 0:i.id,contact_id:r}),d=x=>{x.preventDefault(),a(route("client_contacts.destroy"),{onSuccess:h=>{c(h.props.contacts),n(!1),m()}})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center pb-4",children:[e.jsx("div",{children:e.jsx("h3",{className:"font-bold text-lg text-gray-700 dark:text-gray-300",children:"Confirm to delete the contact"})}),e.jsx("div",{})]}),e.jsxs("form",{onSubmit:d,children:[e.jsx("div",{className:"pb-6",children:e.jsx("p",{className:"",children:"Are you sure to delete this contact?"})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(N,{type:"button",onClick:()=>n(!1),children:"Cancel"}),e.jsx(F,{type:"submit",children:"Delete"})]})})]})]})},W=({updateList:r,setShowCreate:n})=>{const{client:c,contacts:i}=p().props,{data:s,setData:a,post:m,reset:d}=w({contact_id:null,client_id:null,name:"",email:"",contact_number:""}),[x,h]=o.useState([]);o.useEffect(()=>{const t=async()=>await C.get(route("utils.contacts.select",{client_id:c==null?void 0:c.id})).then(u=>{u.status===200&&h(u.data.contacts)});a("client_id",c==null?void 0:c.id),t()},[]);const l=t=>{t.preventDefault(),m(route("client_contacts.store"),{onSuccess:u=>{r(u.props.contacts),n(!1),d()}})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:e.jsx("h3",{className:"font-bold text-lg text-gray-700 dark:text-gray-300",children:"Add Client Contact"})}),e.jsx("div",{})]}),e.jsxs("form",{className:"space-y-4 pt-4",onSubmit:l,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{value:"Contact"}),e.jsx("div",{children:e.jsx(E,{items:x,keySearch:"name",cbSelected:t=>{a({...s,contact_id:t==null?void 0:t.id,name:t==null?void 0:t.name,email:t==null?void 0:t.email,contact_number:t==null?void 0:t.contact_number})}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{value:"Name"}),e.jsx("div",{children:e.jsx(y,{disabled:!0,id:"name",name:"name",type:"text",value:s.name,onChange:t=>a("name",t.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{value:"Email"}),e.jsx("div",{children:e.jsx(y,{disabled:!0,id:"email",name:"email",type:"email",value:s.email,onChange:t=>a("email",t.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{value:"Contact Number"}),e.jsx("div",{children:e.jsx(y,{disabled:!0,id:"contact_number",name:"contact_number",type:"text",value:s.contact_number,onChange:t=>a("contact_number",t.target.value)})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"space-x-2",children:[e.jsx(N,{type:"button",onClick:()=>n(!1),children:"Cancel"}),e.jsx($,{type:"submit",children:"Submit"})]})})]})]})},B=()=>{const{contacts:r,search_query_contact:n}=p().props,[c,i]=o.useState([]),[s,a]=o.useState(null),[m,d]=o.useState(!1);o.useEffect(()=>{i(r.data)},[]);const x=l=>{i(l.data)},h=c.map(l=>({id:`#${l.id}`,name:l.name,email:l.email,contact_number:l.contact_number,created_at:_(l.created_at),action:e.jsx(v,{actionObject:{delete:{action:()=>{a(l),d(!0)},label:"Delete"}}})}));return console.log(s),e.jsxs(e.Fragment,{children:[e.jsx(f,{show:m,children:e.jsx(A,{contactId:s==null?void 0:s.contact_id,updateList:x,setShowDelete:d})}),e.jsxs("div",{className:"pt-6",children:[e.jsx(b,{keyProps:"contacts",updateList:x,data:r,CreateForm:W,search_query:n,routeControl:"clients.show",search_query_key:"search_query_contact"}),e.jsx("div",{className:"h-[calc(100dvh-240px)] overflow-y-auto -mr-5 pr-3 mt-3 overflow-x-auto",children:e.jsx(g,{theadObject:{contact_id:"#",name:"Name",email:"Email",contact_number:"Contact Number",created_at:"Created at",action:""},items:h})})]})]})},V=B,z=()=>{const{tasks:r,search_query_task:n}=p().props,[c,i]=o.useState([]),[s,a]=o.useState(!1),[m,d]=o.useState(null);o.useEffect(()=>{i(r.data)},[]);const x=t=>{i(t.data)},h={3:e.jsx("span",{className:"bg-red-500 text-white px-2 py-1 rounded-full text-xs uppercase font-bold",children:"High"}),2:e.jsx("span",{className:"bg-yellow-600 text-white px-2 py-1 rounded-full text-xs uppercase font-bold",children:"Medium"}),1:e.jsx("span",{className:"bg-gray-500 px-2 py-1 rounded-full text-xs uppercase font-bold",children:"Low"}),0:null},l=c.map(t=>({id:`#${t.acronym}-${t.counter}`,name:t.name,priority_level:h[t.priority_level],project_name:t.project_name,updated_at:_(t.updated_at),action:e.jsx(v,{actionObject:{view:{action:()=>{window.location.href=`/tasks/${t.id}`},label:"View"}}})}));return e.jsxs(e.Fragment,{children:[e.jsx(f,{show:s,children:e.jsx(O,{task:m,setShow:a})}),e.jsx("div",{className:"pt-6",children:e.jsx(b,{keyProps:"tasks",updateList:x,data:r,disableCreate:!0,search_query:n,routeControl:"clients.show",search_query_key:"search_query_task"})}),e.jsx("div",{className:"h-[calc(100dvh-240px)] overflow-auto -mr-5 pr-3 mt-3",children:e.jsx(g,{theadObject:{acronym_id:"#",name:"Name",priority_level:"Priority Level",project_name:"Project Name",updated_at:"Date Updated",action:""},items:l})})]})},H=z;function oe({auth:r,client:n}){const[c,i]=o.useState([{name:"Tasks",code:"task",current:!0},{name:"Projects",code:"project",current:!1},{name:"Contacts",code:"contact",current:!1}]);o.useEffect(()=>{const a=new URLSearchParams(window.location.search);console.log(a.size),a.size!==0&&i(m=>m.map(d=>({...d,current:a.has(`search_query_${d.code}`)})))},[]);const s=c.find(a=>a.current);return e.jsxs(e.Fragment,{children:[e.jsx(k,{title:n.name}),e.jsxs(L,{user:r.user,header:e.jsx("nav",{children:e.jsx("div",{children:e.jsxs("ol",{role:"list",className:"flex items-center space-x-4",children:[e.jsx("li",{children:e.jsxs("a",{href:`${route("clients.index")}`,className:"text-gray-500 hover:text-gray-300 flex items-center text-sm font-medium",children:[e.jsx(D,{className:"h-5 w-5 flex-shrink-0 mr-3","aria-hidden":"true"}),e.jsx("span",{className:"sr-only",children:"Clients"}),"Clients"]})}),e.jsx("li",{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-5 w-5 flex-shrink-0 text-gray-300",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:e.jsx("path",{d:"M5.555 17.776l8-16 .894.448-8 16-.894-.448z"})}),e.jsx("a",{href:`${route("clients.show",n.id)}`,className:"ml-4 text-sm font-bold antialiased text-gray-300 hover:text-gray-700","aria-current":"page",children:n.name})]})})]})})}),children:[e.jsx("div",{children:e.jsx("div",{className:"border-b border-gray-500 dark:border-gray-500",children:e.jsx("nav",{className:"-mb-px flex space-x-3","aria-label":"Tabs",children:c.map(a=>e.jsx("a",{href:"#",onClick:m=>{m.preventDefault(),i(d=>d.map(x=>({...x,current:a.code===x.code})))},className:`${a.current?"border-teal-600 text-gray-600 dark:text-gray-300 font-bold":"border-transparent hover:border-teal-600 hover:text-gray-300"} group inline-flex items-center border-b-2 py-2 px-1 text-sm font-medium`,children:e.jsx("span",{children:a.name})},a.code))})})}),(s==null?void 0:s.code)==="project"&&e.jsx(M,{}),(s==null?void 0:s.code)==="contact"&&e.jsx(V,{}),(s==null?void 0:s.code)==="task"&&e.jsx(H,{})]})]})}export{oe as default};
