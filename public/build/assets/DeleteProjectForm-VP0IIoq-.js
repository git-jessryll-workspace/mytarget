import{q as P,W as f,r as x,b as g,j as e}from"./app-I37UwJ8Q.js";import{I as l}from"./InputLabel-wp07J9qd.js";import{P as N}from"./PrimaryButton-bxyMUJE_.js";import{S as y,D as k}from"./DangerButton-nVdXsmnN.js";import{T as _}from"./TextInput-6ikZNGhg.js";import{C}from"./CreateBoardForm-XUNh5wCs.js";import{E as o}from"./ErrorInput-XJQb45Yl.js";import{T as D}from"./TextArea-g7yk2gnD.js";function w({updateList:d,setShowCreate:n}){var h;const t=(h=P().props)==null?void 0:h.client,{data:a,setData:i,post:c,processing:p,errors:m,reset:j}=f({project_name:"",description:"",active:!0,client_id:(t==null?void 0:t.id)||null}),[b,u]=x.useState([]);x.useEffect(()=>{g.get(route("utils.clients.select")).then(s=>{console.log(s.data),s.status===200&&u(s.data.clients)})},[]);const v=async s=>{s.preventDefault(),await c(route("projects.store"),{onSuccess:r=>{d(r.props.projects),n(!1),j()}})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:e.jsx("h3",{className:"font-bold text-lg text-gray-700 dark:text-gray-300",children:"Create Project"})}),e.jsx("div",{})]}),e.jsxs("form",{className:"space-y-4 pt-4",onSubmit:v,children:[!t&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{value:"Client"}),e.jsx("div",{children:e.jsx(C,{items:b,keySearch:"name",cbSelected:s=>i("client_id",s==null?void 0:s.id)})}),e.jsx(o,{errors:m,errorKey:"client_id"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{value:"Project name"}),e.jsx("div",{children:e.jsx(_,{id:"project_name",name:"project_name",type:"text",value:a.project_name,onChange:s=>i("project_name",s.target.value)})}),e.jsx(o,{errors:m,errorKey:"project_name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{value:"Description"}),e.jsx("div",{children:e.jsx(D,{value:a.description,onChange:s=>i("description",s.target.value),placeholder:"Short description on this client"})}),e.jsx(o,{errors:m,errorKey:"description"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"space-x-2",children:[e.jsx(y,{onClick:()=>{n(!1)},type:"button",children:"Cancel"}),e.jsx(N,{type:"submit",children:"Submit"})]})})]})]})}function L({updateList:d,setShowEdit:n,project:t,skipClientSelect:a=!1}){const{data:i,setData:c,put:p,processing:m,errors:j,reset:b}=f({project_name:"",description:"",active:!0,client_id:null}),[u,v]=x.useState([]);x.useEffect(()=>{g.get(route("utils.clients.select")).then(s=>{s.status===200&&v(s.data.clients.map(r=>({...r,label:r.name,value:r.id})))})},[]),x.useEffect(()=>{if(t){const{project_name:s,description:r,active:S,client_id:E}=t;c({project_name:s,description:r,active:S,client_id:E})}},[t==null?void 0:t.id]);const h=s=>{s.preventDefault(),p(route("projects.update",{id:t.id}),{onSuccess:r=>{d(r.props.projects),n(!1)}})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:e.jsx("h3",{className:"font-bold text-lg text-gray-700 dark:text-gray-300",children:"Edit Project"})}),e.jsx("div",{})]}),e.jsxs("form",{className:"space-y-4 pt-4",onSubmit:h,children:[a&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{value:"Client"}),e.jsx("div",{children:e.jsx(C,{items:u,keySearch:"name",cbSelected:s=>c("client_id",s==null?void 0:s.id),selectedItem:u.find(s=>s.id===(i==null?void 0:i.client_id))})}),e.jsx(o,{errors:j,errorKey:"client_id"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{value:"Project name"}),e.jsx("div",{children:e.jsx(_,{id:"project_name",name:"project_name",type:"text",value:i.project_name,onChange:s=>c("project_name",s.target.value)})}),e.jsx(o,{errors:j,errorKey:"project_name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{value:"Description"}),e.jsx("div",{children:e.jsx(D,{value:i.description,onChange:s=>c("description",s.target.value),placeholder:"Short description on this client"})}),e.jsx(o,{errors:j,errorKey:"description"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"space-x-2",children:[e.jsx(y,{onClick:()=>{n(!1)},type:"button",children:"Cancel"}),e.jsx(N,{type:"submit",children:"Submit"})]})})]})]})}function M({projectId:d,setShowDelete:n,updateList:t}){const{delete:a}=f({}),i=c=>{c.preventDefault(),a(route("projects.destroy",{id:d}),{onSuccess:p=>{t(p.props.projects),n(!1)}})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center pb-4",children:[e.jsx("div",{children:e.jsx("h3",{className:"font-bold text-lg text-gray-700 dark:text-gray-300",children:"Confirm to delete the project"})}),e.jsx("div",{})]}),e.jsxs("form",{onSubmit:i,children:[e.jsx("div",{className:"pb-6",children:e.jsx("p",{className:"",children:"Are you sure to delete this project?"})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(y,{type:"button",onClick:()=>n(!1),children:"Cancel"}),e.jsx(k,{type:"submit",children:"Delete"})]})})]})]})}export{w as C,M as D,L as E};
