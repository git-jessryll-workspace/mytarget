import{r as n,W as k,j as e,q as f,a as B}from"./app-fs_6k6hS.js";import{X as P,D as S,A as D}from"./AuthenticatedLayout-k9NmgLKp.js";import{M as v,S as T,D as w}from"./DangerButton-DE_cglpi.js";import{I as m}from"./InputLabel-tO2ki5i6.js";import{P as A}from"./PrimaryButton-mHZ5eINg.js";import{T as u}from"./TextInput-CNWcuPqg.js";import{A as C,P as L,a as E,E as F,R as $,b as q}from"./PencilSquareIcon-5M3xQCT8.js";import{N as M}from"./NavPanel-rVZ8uTpK.js";import{d as _}from"./date-olAZvHKQ.js";import{T as W}from"./TableList-CqFUqCi9.js";import{A as I}from"./AddTimeLogForm-9UNMPUmK.js";import{a as O,b as R}from"./CreateBoardForm-lw9Dh7HS.js";import"./ErrorInput-1c-OUAaW.js";import"./transition-kZ4-z35S.js";import"./dialog-V-6mXP5a.js";const V=n.memo(function({boardItem:a,boardUp:t,boardDown:d}){const{patch:i,reset:c}=k({}),[o,x]=n.useState(null),[h,j]=n.useState(!1),[l,s]=n.useState(a.name),y=async(p="up")=>{let N;p==="up"?N=[{board_from_id:a.id},{board_to_id:t.id||a.id}]:N=[{board_from_id:a.id},{board_to_id:d.id||a.id}],await i(route("boards.position",N),{onSuccess:()=>c()})},g=async p=>{p.preventDefault(),await i(route("boards.archive",[{board_id:a.id}]),{onSuccess:()=>c()})},b=async()=>{await i(route("boards.name",[{board_id:a.id,name:l}]),{onSuccess:()=>c()})};return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"w-[75%]",children:o?e.jsxs("div",{className:"flex space-x-2 items-center",children:[e.jsx(u,{value:l,onChange:p=>s(p.target.value),onKeyDown:p=>{p.key==="Enter"&&(x(!1),b())}}),e.jsx("div",{className:"cursor-pointer hover:opacity-75",onClick:()=>{x(!1),s(a.name)},children:e.jsx(P,{})})]}):e.jsx("span",{className:"cursor-pointer",onClick:()=>x(!0),children:l})}),e.jsxs("td",{className:"flex space-x-1",children:[e.jsx("div",{className:`${t?"cursor-pointer hover:opacity-75":"cursor-not-allowed opacity-50"}`,onClick:()=>{t&&y("up")},children:e.jsx(C,{className:"h-6 w-6"})}),e.jsx("div",{className:`${d?"cursor-pointer hover:opacity-75":"cursor-not-allowed opacity-50"}`,onClick:()=>{d&&y("down")},children:e.jsx(C,{className:"h-6 w-6 rotate-180"})}),e.jsx("div",{className:"cursor-pointer hover:opacity-75",onClick:()=>x(!0),children:e.jsx(L,{})}),e.jsx("div",{className:"cursor-pointer hover:opacity-75",onClick:()=>j(!0),children:e.jsx(E,{className:"w-6 h-6 text-red-500 dark:text-red-400"})})]})]}),e.jsx(v,{show:h,maxWidth:"sm",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center pb-4",children:[e.jsx("div",{children:e.jsx("h3",{className:"font-bold text-lg text-gray-700 dark:text-gray-300",children:"Confirm to arvhice the board"})}),e.jsx("div",{})]}),e.jsxs("form",{onSubmit:g,children:[e.jsx("div",{className:"pb-6",children:e.jsx("p",{className:"",children:"All tasks that connected to this board will be archived."})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(T,{type:"button",onClick:()=>j(!1),children:"Cancel"}),e.jsx(w,{type:"submit",children:"Archive"})]})})]})]})})]})}),X=n.memo(function(){const{project_client:a}=f().props,{boards:t}=a;return console.log(t),e.jsx(e.Fragment,{children:e.jsxs("table",{className:"table table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Board Name"}),e.jsx("th",{children:"Position"})]})}),e.jsx("tbody",{children:t.map((d,i)=>e.jsx(V,{boardItem:d,boardUp:t[i-1]||null,boardDown:t[i+1]||null},d.id))})]})})}),z=()=>{const{project_client:r,client:a,acronym:t}=f().props,{data:d,setData:i}=k({project_name:r.project_name,description:r.description});return e.jsx("div",{className:"h-[calc(100dvh-165px)] overflow-y-auto -mr-5",children:e.jsxs("div",{className:"w-full space-y-5 pl-1 pr-5",children:[e.jsxs("section",{className:"border dark:border-gray-700 bg-gray-900 p-4 md:p-6 rounded-md md:grid md:grid-cols-2",children:[e.jsx("header",{className:"pt-2 pb-4 md:pb-0",children:e.jsx("h2",{className:"text-normal md:text-lg font-medium text-gray-900 dark:text-gray-300",children:"General Settings"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{value:"Project Name"}),e.jsx("div",{children:e.jsx(u,{value:d.project_name,onChange:c=>i("project_name",c.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{value:"Description"}),e.jsx("div",{children:e.jsx("textarea",{value:d.description,onChange:c=>i("description",c.target.value),className:"textarea border border-gray-300 dark:border-gray-700 focus:ring-gray-800 focus:outline-none focus:ring-1 focus:border-gray-600 h-44 w-full ",placeholder:"Short note on this client"})})]})]}),e.jsx("div",{className:"flex justify-end border-t border-gray-700 col-span-2 mt-3",children:e.jsx("div",{className:"pt-3",children:e.jsx(A,{children:"Save"})})})]}),e.jsxs("section",{className:"border dark:border-gray-700 bg-gray-900 p-4 md:p-6 rounded-md md:grid md:grid-cols-2",children:[e.jsx("header",{className:"pb-4 md:pb-0",children:e.jsx("h2",{className:"text-normal md:text-lg font-medium text-gray-900 dark:text-gray-300",children:"Boards"})}),e.jsx("div",{className:"space-y-4",children:e.jsx(X,{})})]}),e.jsxs("section",{className:"border dark:border-gray-700 bg-gray-900 p-4 md:p-6 rounded-md md:grid md:grid-cols-2",children:[e.jsx("header",{className:"pb-4 md:pb-0",children:e.jsx("h2",{className:"text-normal md:text-lg font-medium text-gray-900 dark:text-gray-300",children:"Client Information"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{value:"Client Name"}),e.jsx("div",{children:e.jsx(u,{disabled:!0,value:a.name})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{value:"Project Acronym"}),e.jsx("div",{children:e.jsx(u,{disabled:!0,value:t==null?void 0:t.acronym})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{value:"Current Position"}),e.jsx("div",{children:e.jsx(u,{disabled:!0,value:a.position})})]})]}),e.jsx("div",{className:"flex justify-end col-span-2 mt-5 border-t border-gray-700",children:e.jsx("div",{className:"pt-3",children:e.jsx("button",{className:"px-3 py-2 rounded-md font-bold text-xs border shadow-md uppercase border-gray-300 dark:border-gray-600",children:"View Details"})})})]}),e.jsxs("section",{className:"border dark:border-gray-700 bg-gray-900 p-4 md:p-6 rounded-md md:flex md:justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-300",children:"Archive Project?"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"It will hide on the project list and hide all tasks that connected to this project."})]}),e.jsx("div",{className:"pt-3 md:pt-0 text-balance",children:e.jsx(w,{children:"Archived"})})]}),e.jsxs("section",{className:"border dark:border-gray-700 bg-gray-900 p-4 md:p-6 rounded-md md:flex md:justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-300",children:"Delete Project?"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"All tasks that connected on this project will be deleted."})]}),e.jsx("div",{className:"pt-3 md:pt-0 text-balance",children:e.jsx(w,{children:"Delete"})})]})]})})},H=({task:r})=>{var l;const{project_client:a}=f().props,[t,d]=n.useState(!1),{boards:i}=a;console.log(a,r);const{data:c,setData:o,put:x}=k({name:"",description:"",board_id:(l=i[0])==null?void 0:l.id,client_project_id:a==null?void 0:a.id,client_id:r.client_id,priority_level:0,is_archived:!1,created_at:null}),{acronym:h}=r;n.useEffect(()=>{o({name:r.name,description:r.description,board_id:r.board_id,priority_level:r.priority_level,is_archived:r==null?void 0:r.is_archived,created_at:r.created_at})},[]);const j=async s=>{s.preventDefault(),x(route("tasks.update",{id:r.id}))};return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"",children:[e.jsxs("header",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold",children:["#",`${h}-${h.counter}`]}),e.jsxs("h6",{className:"text-xs flex items-center",children:[a.project_name,e.jsx("svg",{viewBox:"0 0 2 2",className:"h-1 w-1 fill-current mx-1",children:e.jsx("circle",{cx:1,cy:1,r:1})}),_(r.updated_at)]})]}),e.jsx("div",{className:"",children:e.jsx(S,{actionObject:{view:{action:()=>{d(!0)},label:"Archive"}},childIcon:e.jsx(F,{className:"cursor-pointer rotate-90 h-6 w-6"})})})]}),e.jsxs("form",{className:"space-y-6 pt-6",onSubmit:j,children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{value:"Board"}),e.jsx("div",{children:e.jsx("select",{value:c.board_id,onChange:s=>o("board_id",s.target.value),className:"bg-[var(--fallback-b1,oklch(var(--b1)/var(--tw-bg-opacity)))] text-sm rounded-md",children:i.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})})]}),e.jsxs("div",{className:"space-y-2 w-44",children:[e.jsx(m,{value:"Priority Level"}),e.jsx("div",{children:e.jsxs("select",{value:c.priority_level,onChange:s=>o("priority_level",s.target.value),className:"bg-[var(--fallback-b1,oklch(var(--b1)/var(--tw-bg-opacity)))] text-sm rounded-md w-full",children:[e.jsx("option",{value:"0",children:"None"}),e.jsx("option",{value:"1",children:"Low"}),e.jsx("option",{value:"2",children:"Medium"}),e.jsx("option",{value:"3",children:"High"})]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{value:"Task"}),e.jsx("div",{children:e.jsx(u,{value:c.name,onChange:s=>o("name",s.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{value:"Date Created"}),e.jsx("div",{children:e.jsx(u,{type:"date",value:c.created_at,onChange:s=>o("created_at",s.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{value:"Description"}),e.jsx("div",{children:e.jsx("textarea",{rows:5,value:c.description,onChange:s=>o("description",s.target.value),className:"textarea border resize-none border-gray-300 dark:border-gray-700 focus:ring-gray-800 focus:outline-none focus:ring-1 focus:border-gray-600 w-full ",placeholder:"Short description"})})]}),e.jsx("div",{className:"border-t border-gray-400 dark:border-gray-700 flex justify-end pt-4",children:e.jsx("div",{className:"",children:e.jsx(A,{type:"submit",children:"Save"})})})]})]}),e.jsx(v,{show:t,maxWidth:"md",children:e.jsx(I,{setShow:d})})]})},U=()=>{const{tasks:r,search_query_task:a}=f().props,[t,d]=n.useState([]),[i,c]=n.useState(null),[o,x]=n.useState(!1);n.useEffect(()=>{d(r.data)},[]);const h=s=>{d(s.data)},j={3:e.jsx("span",{className:"text-red-500 rounded-full text-xs uppercase font-bold",children:"High"}),2:e.jsx("span",{className:"bg-yellow-600 text-white px-2 py-1 rounded-full text-xs uppercase font-bold",children:"Medium"}),1:e.jsx("span",{className:"bg-gray-500 px-2 py-1 rounded-full text-xs uppercase font-bold",children:"Low"}),0:null},l=r.data.map(s=>({id:`#${s.acronym}-${s.counter}`,name:s.name,board_name:s.board_name,priority_level:j[s.priority_level],created_at:_(s.created_at),updated_at:_(s.updated_at),action:e.jsx(S,{actionObject:{edit:{action:()=>{c(s),x(!0)},label:"Edit"},view:{action:()=>{window.location.href=route("tasks.show",{id:s.id})},label:"View"}}})}));return e.jsxs(e.Fragment,{children:[e.jsx(M,{keyProps:"tasks",updateList:h,data:r,disableCreate:!0,search_query:a,routeControl:"projects.show",search_query_key:"search_query_task"}),e.jsx("div",{className:"h-[calc(100dvh-200px)] overflow-auto -mr-5 pr-3",children:e.jsx(W,{theadObject:{acronym_id:"#",name:"Name",board_name:"Board Position",priority_level:"Priority Level",created_at:"Date Created",updated_at:"Date Updated",action:""},items:l})}),e.jsx(v,{show:o,children:e.jsx(H,{task:i})})]})},ne=({auth:r,project_client:a})=>{const{boards:t}=a,[d,i]=n.useState(!1),[c,o]=n.useState(!1),[x,h]=n.useState([{name:"Tasks",code:"task",current:!0},{name:"Settings",code:"detail",current:!1}]),j=[{name:a.project_name,href:route("projects.show",{id:a.id}),current:!0}],l=x.find(s=>s.current);return e.jsxs(e.Fragment,{children:[e.jsx(B,{title:a.project_name}),e.jsxs(D,{user:r.user,header:e.jsxs("nav",{className:"flex justify-between items-center","aria-label":"Breadcrumb",children:[e.jsx("div",{children:e.jsxs("ol",{role:"list",className:"flex items-center space-x-4",children:[e.jsx("li",{children:e.jsx("div",{children:e.jsxs("a",{href:`${route("projects.index")}`,className:"text-gray-400 hover:text-gray-500 flex items-center text-sm font-medium",children:[e.jsx($,{className:"h-5 w-5 flex-shrink-0 mr-3","aria-hidden":"true"}),e.jsx("span",{className:"sr-only",children:"Projects"}),"Projects"]})})}),j.map(s=>e.jsx("li",{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-5 w-5 flex-shrink-0 text-gray-300",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:e.jsx("path",{d:"M5.555 17.776l8-16 .894.448-8 16-.894-.448z"})}),e.jsx("a",{href:s.href,className:"ml-4 text-sm font-bold antialiased text-gray-500 hover:text-gray-700","aria-current":s.current?"page":void 0,children:s.name})]})},s.name))]})}),e.jsx("div",{children:e.jsx(S,{actionObject:{createTask:{action:()=>i(!0),label:"Add New Task",disabled:t.length===0},view:{action:()=>{o(!0)},label:"Add New Board"}},childIcon:e.jsx(q,{className:"cursor-pointer rotate-90 h-6 w-6"})})})]}),children:[e.jsx("div",{className:"pb-4",children:e.jsx("div",{className:"border-b border-gray-500 dark:border-gray-500",children:e.jsx("nav",{className:"-mb-px flex space-x-3","aria-label":"Tabs",children:x.map(s=>e.jsx("a",{href:"#",onClick:y=>{y.preventDefault(),h(g=>g.map(b=>({...b,current:s.code===b.code})))},className:`${s.current?"border-teal-600 text-gray-600 dark:text-gray-300 font-bold":"border-transparent hover:border-teal-600 hover:text-gray-300"} group inline-flex items-center border-b-2 py-2 px-1 text-sm font-medium`,children:e.jsx("span",{children:s.name})},s.code))})})}),(l==null?void 0:l.code)==="task"&&e.jsx(U,{}),(l==null?void 0:l.code)==="detail"&&e.jsx(z,{})]}),e.jsx(v,{show:d,maxWidth:"sm",children:e.jsx(O,{setShow:i})}),e.jsx(v,{show:c,maxWidth:"sm",children:e.jsx(R,{setShow:o})})]})};export{ne as default};
