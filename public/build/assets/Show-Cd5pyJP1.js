import{j as e,q as p,r as i,W as C,b as w,a as k}from"./app-REKZwm7R.js";import{D as v,A as L}from"./AuthenticatedLayout-9ae8QRHs.js";import{Q as D}from"./QuestionMarkIcon-easqrsxP.js";import{N as b}from"./NavPanel-uNYqGwrY.js";import{d as g}from"./date-olAZvHKQ.js";import{E as P,D as S,C as q}from"./DeleteProjectForm-2PlP8Ofn.js";import{C as E}from"./CreateBoardForm-g5OA-cwC.js";import{S as _,M as f,D as F}from"./DangerButton-SgrZM1nO.js";import{T as N}from"./TableList-8A5vBE6U.js";import{I as j}from"./InputLabel-veGFVTUF.js";import{P as T}from"./PrimaryButton-0-tt5uXA.js";import{T as y}from"./TextInput-4wmKYXzE.js";import"./DeleteClientForm-OJUzAmPy.js";import{T as $}from"./TaskStatus-yL69VgPg.js";import"./transition-EkpgEfur.js";import"./dialog-QGwVqU0i.js";import"./ErrorInput-C8-5YIWs.js";const O=({priority_level:n})=>({3:e.jsx("span",{className:"bg-red-500 text-white px-2 py-1 rounded-full text-xs uppercase font-bold",children:"High"}),2:e.jsx("span",{className:"bg-yellow-600 text-white px-2 py-1 rounded-full text-xs uppercase font-bold",children:"Medium"}),1:e.jsx("span",{className:"bg-gray-500 px-2 py-1 rounded-full text-xs uppercase font-bold",children:"Low"}),0:null})[n],I=({task:n,setShow:c})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-b border-gray-400 dark:border-gray-300 pb-2",children:e.jsx("h3",{className:"text-xl font-bold",children:"Task"})}),e.jsxs("div",{className:"pt-6 flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:n.name}),e.jsx("h5",{className:"text-sm",children:n.project_name})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{children:e.jsx(O,{priority_level:n.priority_level})})})]}),e.jsx("div",{className:"pt-3 h-[50dvh] overflow-y-auto",children:e.jsx("div",{className:"text-left text-sm",dangerouslySetInnerHTML:{__html:n.description}})}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx("div",{children:e.jsx(_,{onClick:()=>c(!1),children:"Close"})})})]}),A=()=>{const{projects:n,search_query_project:c}=p().props,[o,l]=i.useState([]),[t,s]=i.useState(null),[m,d]=i.useState(!1),[x,h]=i.useState(!1);i.useEffect(()=>{l(n.data)},[]);const a=u=>{l(u.data)},r=o.map(u=>({id:`#${u.id}`,project_name:u.project_name,updated_date:g(u.updated_at),status:u.active===1?"Active":"Inactive",action:e.jsx(v,{actionObject:{edit:{action:()=>{s(u),d(!0)},label:"Edit"},delete:{action:()=>{s(u),h(!0)},label:"Delete"}}})}));return e.jsxs(e.Fragment,{children:[e.jsx(f,{show:m,maxWidth:"md",children:e.jsx(P,{updateList:a,project:t,setShowEdit:d,skipClientSelect:!0})}),e.jsx(f,{show:x,maxWidth:"md",children:e.jsx(S,{updateList:a,projectId:t==null?void 0:t.id,setShowDelete:h})}),e.jsxs("div",{className:"pt-6",children:[e.jsx(b,{keyProps:"projects",updateList:a,data:n,CreateForm:q,search_query:c,routeControl:"clients.show",search_query_key:"search_query_project"}),e.jsx("div",{className:"h-[calc(100dvh-240px)] overflow-y-auto -mr-5 pr-3 mt-3 overflow-x-auto",children:e.jsx(N,{theadObject:{id:"#",project_name:"Project Name",updated_date:"Updated Date",status:"Status",action:""},items:r})})]})]})},M=A,W=({contactId:n,setShowDelete:c,updateList:o})=>{console.log(n);const{client:l}=p().props,{setData:t,delete:s,reset:m}=C({client_id:l==null?void 0:l.id,contact_id:n}),d=x=>{x.preventDefault(),s(route("client_contacts.destroy"),{onSuccess:h=>{o(h.props.contacts),c(!1),m()}})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center pb-4",children:[e.jsx("div",{children:e.jsx("h3",{className:"font-bold text-lg text-gray-700 dark:text-gray-300",children:"Confirm to delete the contact"})}),e.jsx("div",{})]}),e.jsxs("form",{onSubmit:d,children:[e.jsx("div",{className:"pb-6",children:e.jsx("p",{className:"",children:"Are you sure to delete this contact?"})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(_,{type:"button",onClick:()=>c(!1),children:"Cancel"}),e.jsx(F,{type:"submit",children:"Delete"})]})})]})]})},B=({updateList:n,setShowCreate:c})=>{const{client:o,contacts:l}=p().props,{data:t,setData:s,post:m,reset:d}=C({contact_id:null,client_id:null,name:"",email:"",contact_number:""}),[x,h]=i.useState([]);i.useEffect(()=>{const r=async()=>await w.get(route("utils.contacts.select",{client_id:o==null?void 0:o.id})).then(u=>{u.status===200&&h(u.data.contacts)});s("client_id",o==null?void 0:o.id),r()},[]);const a=r=>{r.preventDefault(),m(route("client_contacts.store"),{onSuccess:u=>{n(u.props.contacts),c(!1),d()}})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:e.jsx("h3",{className:"font-bold text-lg text-gray-700 dark:text-gray-300",children:"Add Client Contact"})}),e.jsx("div",{})]}),e.jsxs("form",{className:"space-y-4 pt-4",onSubmit:a,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{value:"Contact"}),e.jsx("div",{children:e.jsx(E,{items:x,keySearch:"name",cbSelected:r=>{s({...t,contact_id:r==null?void 0:r.id,name:r==null?void 0:r.name,email:r==null?void 0:r.email,contact_number:r==null?void 0:r.contact_number})}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{value:"Name"}),e.jsx("div",{children:e.jsx(y,{disabled:!0,id:"name",name:"name",type:"text",value:t.name,onChange:r=>s("name",r.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{value:"Email"}),e.jsx("div",{children:e.jsx(y,{disabled:!0,id:"email",name:"email",type:"email",value:t.email,onChange:r=>s("email",r.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{value:"Contact Number"}),e.jsx("div",{children:e.jsx(y,{disabled:!0,id:"contact_number",name:"contact_number",type:"text",value:t.contact_number,onChange:r=>s("contact_number",r.target.value)})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"space-x-2",children:[e.jsx(_,{type:"button",onClick:()=>c(!1),children:"Cancel"}),e.jsx(T,{type:"submit",children:"Submit"})]})})]})]})},V=()=>{const{contacts:n,search_query_contact:c}=p().props,[o,l]=i.useState([]),[t,s]=i.useState(null),[m,d]=i.useState(!1);i.useEffect(()=>{l(n.data)},[]);const x=a=>{l(a.data)},h=o.map(a=>({id:`#${a.id}`,name:a.name,email:a.email,contact_number:a.contact_number,created_at:g(a.created_at),action:e.jsx(v,{actionObject:{delete:{action:()=>{s(a),d(!0)},label:"Delete"}}})}));return console.log(t),e.jsxs(e.Fragment,{children:[e.jsx(f,{show:m,children:e.jsx(W,{contactId:t==null?void 0:t.contact_id,updateList:x,setShowDelete:d})}),e.jsxs("div",{className:"pt-6",children:[e.jsx(b,{keyProps:"contacts",updateList:x,data:n,CreateForm:B,search_query:c,routeControl:"clients.show",search_query_key:"search_query_contact"}),e.jsx("div",{className:"h-[calc(100dvh-240px)] overflow-y-auto -mr-5 pr-3 mt-3 overflow-x-auto",children:e.jsx(N,{theadObject:{contact_id:"#",name:"Name",email:"Email",contact_number:"Contact Number",created_at:"Created at",action:""},items:h})})]})]})},z=V,H=()=>{const{tasks:n,search_query_task:c}=p().props,[o,l]=i.useState([]),[t,s]=i.useState(!1),[m,d]=i.useState(null);i.useEffect(()=>{l(n.data)},[]);const x=a=>{l(a.data)},h=o.map(a=>({id:`${a.acronym}-${a.counter}`,name:e.jsxs("p",{className:"line-clamp-1 py-0.5",children:[e.jsx("span",{className:"mr-1 border boarder-gray-300 py-0.5 px-1 text-xs rounded-sm",children:a.project_name}),a.name]}),priority_level:a.priority_level,status:e.jsx($,{status:a.task_status}),action:e.jsx(v,{actionObject:{view:{action:()=>{window.location.href=`/tasks/${a.id}`},label:"View"}}})}));return e.jsxs(e.Fragment,{children:[e.jsx(f,{show:t,children:e.jsx(I,{task:m,setShow:s})}),e.jsx("div",{className:"pt-6",children:e.jsx(b,{keyProps:"tasks",updateList:x,data:n,disableCreate:!0,search_query:c,routeControl:"clients.show",search_query_key:"search_query_task"})}),e.jsx("div",{className:"h-[calc(100dvh-240px)] overflow-auto -mr-5 pr-3 mt-3",children:e.jsx(N,{theadObject:{id:"#",name:"Name",priority_level:"Priority Level",status:"Status",action:""},items:h,indexPrio:1})})]})},Q=H;function le({auth:n,client:c}){const[o,l]=i.useState([{name:"Tasks",code:"task",current:!0},{name:"Projects",code:"project",current:!1},{name:"Contacts",code:"contact",current:!1}]);i.useEffect(()=>{const s=new URLSearchParams(window.location.search);console.log(s.size),s.size!==0&&l(m=>m.map(d=>({...d,current:s.has(`search_query_${d.code}`)})))},[]);const t=o.find(s=>s.current);return e.jsxs(e.Fragment,{children:[e.jsx(k,{title:c.name}),e.jsxs(L,{user:n.user,header:e.jsx("nav",{children:e.jsx("div",{children:e.jsxs("ol",{role:"list",className:"flex items-center space-x-4",children:[e.jsx("li",{children:e.jsxs("a",{href:`${route("clients.index")}`,className:"text-gray-500 hover:text-gray-300 flex items-center text-sm font-medium",children:[e.jsx(D,{className:"h-5 w-5 flex-shrink-0 mr-3","aria-hidden":"true"}),e.jsx("span",{className:"sr-only",children:"Clients"}),"Clients"]})}),e.jsx("li",{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-5 w-5 flex-shrink-0 text-gray-300",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:e.jsx("path",{d:"M5.555 17.776l8-16 .894.448-8 16-.894-.448z"})}),e.jsx("a",{href:`${route("clients.show",c.id)}`,className:"ml-4 text-sm font-bold antialiased text-gray-300 hover:text-gray-700","aria-current":"page",children:c.name})]})})]})})}),children:[e.jsx("div",{children:e.jsx("div",{className:"border-b border-gray-500 dark:border-gray-500",children:e.jsx("nav",{className:"-mb-px flex space-x-3","aria-label":"Tabs",children:o.map(s=>e.jsx("a",{href:"#",onClick:m=>{m.preventDefault(),l(d=>d.map(x=>({...x,current:s.code===x.code})))},className:`${s.current?"border-teal-600 text-gray-600 dark:text-gray-300 font-bold":"border-transparent hover:border-teal-600 hover:text-gray-300"} group inline-flex items-center border-b-2 py-2 px-1 text-sm font-medium`,children:e.jsx("span",{children:s.name})},s.code))})})}),(t==null?void 0:t.code)==="project"&&e.jsx(M,{}),(t==null?void 0:t.code)==="contact"&&e.jsx(z,{}),(t==null?void 0:t.code)==="task"&&e.jsx(Q,{})]})]})}export{le as default};
