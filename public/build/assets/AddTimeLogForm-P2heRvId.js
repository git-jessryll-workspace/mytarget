import{r as u,q as g,W as y,j as e}from"./app-REKZwm7R.js";import{I as o}from"./InputLabel-veGFVTUF.js";import{S as b,D as w,M as C}from"./DangerButton-SgrZM1nO.js";import{P as _}from"./PrimaryButton-0-tt5uXA.js";import{T as v}from"./TextInput-4wmKYXzE.js";import{d as k}from"./date-olAZvHKQ.js";import{D as S}from"./AuthenticatedLayout-9ae8QRHs.js";import{h as D}from"./QuestionMarkIcon-easqrsxP.js";import{E as N}from"./ErrorInput-C8-5YIWs.js";const T=({setShow:s})=>{const{task:c}=g().props,{patch:r}=y(),n=async d=>{d.preventDefault(),r(route("tasks.archive",{id:c.id}),{onSuccess:()=>s(!1)})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center pb-4",children:[e.jsx("div",{children:e.jsx("h3",{className:"font-bold text-lg text-gray-700 dark:text-gray-300",children:"Confirm to archive the task"})}),e.jsx("div",{})]}),e.jsxs("form",{onSubmit:n,children:[e.jsx("div",{className:"pb-6",children:e.jsx("p",{className:"",children:"Are you sure to archive this task?"})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(b,{type:"button",onClick:()=>s(!1),children:"Cancel"}),e.jsx(w,{type:"submit",children:"Yes"})]})})]})]})},F=u.memo(T),A=({task:s,setShow:c})=>{var m;const{project_client:r}=g().props,{acronym:n,acronym_counter:d}=s,[j,x]=u.useState(!1),{boards:h}=r,{data:l,setData:t,put:p,reset:f}=y({name:"",description:"",board_id:(m=h[0])==null?void 0:m.id,client_project_id:r==null?void 0:r.id,client_id:s.client_id,priority_level:0,is_archived:!1,created_at:null,task_status:"Todo"});u.useEffect(()=>{t({name:s.name,description:s.description,board_id:s.board_id,priority_level:s.priority_level,is_archived:s==null?void 0:s.is_archived,created_at:s.created_at,task_status:s.task_status})},[]);const i=async a=>{a.preventDefault(),p(route("tasks.update",{id:s.id}),{onSuccess:()=>{f(),c(!1)}})};return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"",children:[e.jsxs("header",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold",children:["#",`${n}-${d}`]}),e.jsxs("h6",{className:"text-xs flex items-center",children:[r.project_name,e.jsx("svg",{viewBox:"0 0 2 2",className:"h-1 w-1 fill-current mx-1",children:e.jsx("circle",{cx:1,cy:1,r:1})}),k(s.updated_at)]})]}),e.jsx("div",{className:"",children:e.jsx(S,{actionObject:{view:{action:()=>{x(!0)},label:"Archive"}},childIcon:e.jsx(D,{className:"cursor-pointer rotate-90 h-6 w-6"})})})]}),e.jsxs("form",{className:"space-y-6 pt-6",onSubmit:i,children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"space-y-2 w-44",children:[e.jsx(o,{value:"Priority Level"}),e.jsx("div",{children:e.jsxs("select",{value:l.priority_level,onChange:a=>t("priority_level",a.target.value),className:"bg-[var(--fallback-b1,oklch(var(--b1)/var(--tw-bg-opacity)))] text-sm rounded-md w-full",children:[e.jsx("option",{value:"None",children:"None"}),e.jsx("option",{value:"Low",children:"Low"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"High",children:"High"})]})})]}),e.jsxs("div",{className:"space-y-2 w-44",children:[e.jsx(o,{value:"Priority Level"}),e.jsx("div",{children:e.jsxs("select",{value:l.task_status,onChange:a=>t("task_status",a.target.value),className:"bg-[var(--fallback-b1,oklch(var(--b1)/var(--tw-bg-opacity)))] text-sm rounded-md w-full",children:[e.jsx("option",{value:"Todo",children:"Todo"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Done",children:"Done"}),e.jsx("option",{value:"Backlog",children:"Backlog"}),e.jsx("option",{value:"Canceled",children:"Canceled"})]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{value:"Task"}),e.jsx("div",{children:e.jsx(v,{value:l.name,onChange:a=>t("name",a.target.value)})})]}),e.jsxs("div",{className:"flex items-center justify-between space-x-3",children:[e.jsxs("div",{className:"space-y-2 w-full",children:[e.jsx(o,{value:"Date Created"}),e.jsx("div",{children:e.jsx(v,{type:"date",value:l.created_at,onChange:a=>t("created_at",a.target.value)})})]}),e.jsxs("div",{className:"space-y-2 w-full",children:[e.jsx(o,{value:"Board Position"}),e.jsx("div",{children:e.jsx("select",{value:l.board_id,onChange:a=>t("board_id",a.target.value),className:"bg-[var(--fallback-b1,oklch(var(--b1)/var(--tw-bg-opacity)))] text-sm rounded-md w-full",children:h.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{value:"Description"}),e.jsx("div",{children:e.jsx("textarea",{rows:5,value:l.description,onChange:a=>t("description",a.target.value),className:"textarea border resize-none border-gray-300 dark:border-gray-700 focus:ring-gray-800 focus:outline-none focus:ring-1 focus:border-gray-600 w-full ",placeholder:"Short description"})})]}),e.jsx("div",{className:"border-t border-gray-400 dark:border-gray-700 flex justify-end pt-4",children:e.jsxs("div",{className:"",children:[e.jsx(b,{onClick:()=>c(!1),type:"button",children:"Cancel"}),e.jsx(_,{type:"submit",children:"Save"})]})})]})]}),e.jsx(C,{show:j,maxWidth:"md",children:e.jsx(F,{setShow:x})})]})},V=A,H=u.memo(function({setShowAddTimeLog:c}){const{task:r}=g().props,{data:n,setData:d,post:j,errors:x,reset:h}=y({time_log:"",created_at:null,body:"",task_id:r.id,client_project_id:r.client_project_id}),[l,t]=u.useState(null),p=async i=>{i.preventDefault(),j(route("task_time_logs.store",{onSuccess:m=>{h()},onError:m=>{console.error(m)}})),c(!1)};function f(i){return/^(\d+h)?(\s*\d+m)?$/.test(i)?(console.log("Valid time format!"),!0):(console.log("Invalid time format. Please use the format 'h hours m minutes', e.g., 3h 5m."),!1)}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"",children:e.jsx("h3",{className:"leading-6 font-semibold",children:"Add Time Log"})}),e.jsxs("form",{className:"space-y-4 mt-5",onSubmit:p,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{value:"Time Log"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(v,{value:n.time_log,onChange:i=>{d("time_log",i.target.value),f(i.target.value)?t(null):t("invalid")}}),e.jsx(N,{errors:x,errorKey:"time_log"}),l&&e.jsx("p",{className:"text-error text-xs",children:"Invalid input time log"}),e.jsx("p",{className:"text-xs italic",children:"Required format h=hour m=minutes. example 3h 5m equevalent of 3hours and 5minutes."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{value:"Body"}),e.jsxs("div",{children:[e.jsx("textarea",{value:n.body,onChange:i=>d("body",i.target.value),className:"textarea border border-gray-300 dark:border-gray-700 focus:ring-gray-800 focus:outline-none focus:ring-1 focus:border-gray-600 h-24 w-full ",placeholder:"short description of your time log"}),e.jsx(N,{errors:x,errorKey:"body"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{value:"Date"}),e.jsx("div",{children:e.jsx(v,{type:"date"})})]}),e.jsx("div",{className:"border-t border-gray-300 dark:border-gray-500 flex space-x-2 justify-end",children:e.jsxs("div",{className:"flex space-x-2 mt-4",children:[e.jsx(b,{onClick:()=>c(!1),children:"Cancel"}),e.jsx(_,{disabled:l,children:"Save"})]})})]})]})});export{F as A,V as U,H as a};
