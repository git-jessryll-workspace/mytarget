import{W as p,j as e,r as d,a as C}from"./app-bbybQd69.js";import{N}from"./NavPanel-IwVsULTp.js";import{D as g,A as S}from"./AuthenticatedLayout-pGTZRN85.js";import{U as D}from"./PencilSquareIcon-92KiC_2P.js";import{S as v,D as _,M as b}from"./DangerButton-iMjMiVDv.js";import{T as E}from"./TableList-VSFuXmG4.js";import{E as x}from"./ErrorInput-leVUgBdI.js";import{I as u}from"./InputLabel-QtIa3tK5.js";import{P as y}from"./PrimaryButton-HcZK7G6X.js";import{T as j}from"./TextInput-KKaGII3y.js";import"./transition-bxOOpJ-n.js";import"./dialog-J54nP1Pr.js";const w=({updateList:i,setShowCreate:a})=>{const{data:t,setData:n,post:r,processing:l,errors:c,reset:o}=p({name:"",email:"",contact_number:""}),h=s=>{s.preventDefault(),r(route("contacts.store"),{onSuccess:m=>{i(m.props.contacts),a(!1)}})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:e.jsx("h3",{className:"font-bold text-lg text-gray-700 dark:text-gray-300",children:"Create Contact"})}),e.jsx("div",{})]}),e.jsxs("form",{className:"space-y-4 pt-4",onSubmit:h,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{value:"Name"}),e.jsx("div",{children:e.jsx(j,{id:"name",name:"name",type:"text",value:t.name,onChange:s=>n("name",s.target.value)})}),e.jsx(x,{errors:c,errorKey:"name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{value:"Email"}),e.jsx("div",{children:e.jsx(j,{id:"email",name:"email",type:"email",value:t.email,onChange:s=>n("email",s.target.value)})}),e.jsx(x,{errors:c,errorKey:"email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{value:"Contact Number"}),e.jsxs("div",{children:[e.jsx(j,{id:"contact_number",name:"contact_number",type:"text",value:t.contact_number,onChange:s=>n("contact_number",s.target.value)}),e.jsx(x,{errors:c,errorKey:"contact_number"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"space-x-2",children:[e.jsx(v,{type:"button",onClick:()=>a(!1),children:"Cancel"}),e.jsx(y,{type:"submit",children:"Submit"})]})})]})]})},F=w,I=({updateList:i,setShowEdit:a,contact:t})=>{const{data:n,setData:r,put:l,processing:c,errors:o,reset:h}=p({name:"",email:"",contact_number:""});d.useEffect(()=>{r({name:t==null?void 0:t.name,contact_number:t==null?void 0:t.contact_number,email:t==null?void 0:t.email})},[t==null?void 0:t.id]);const s=m=>{m.preventDefault(),l(route("contacts.update",{id:t.id}),{onSuccess:f=>{console.log(f),i(f.props.contacts),a(!1)}})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:e.jsx("h3",{className:"font-bold text-lg text-gray-700 dark:text-gray-300",children:"Create Contact"})}),e.jsx("div",{})]}),e.jsxs("form",{className:"space-y-4 pt-4",onSubmit:s,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{value:"Name"}),e.jsx("div",{children:e.jsx(j,{id:"name",name:"name",type:"text",value:n.name,onChange:m=>r("name",m.target.value)})}),e.jsx(x,{errors:o,errorKey:"name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{value:"Email"}),e.jsx("div",{children:e.jsx(j,{id:"email",name:"email",type:"email",value:n.email,onChange:m=>r("email",m.target.value)})}),e.jsx(x,{errors:o,errorKey:"email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{value:"Contact Number"}),e.jsxs("div",{children:[e.jsx(j,{id:"contact_number",name:"contact_number",type:"text",value:n.contact_number,onChange:m=>r("contact_number",m.target.value)}),e.jsx(x,{errors:o,errorKey:"contact_number"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"space-x-2",children:[e.jsx(v,{type:"button",onClick:()=>setShowCreate(!1),children:"Cancel"}),e.jsx(y,{type:"submit",children:"Submit"})]})})]})]})},k=d.memo(function({contactId:a,setShowDelete:t,updateList:n}){const{delete:r}=p({}),l=c=>{c.preventDefault(),r(route("contacts.destroy",{id:a}),{onSuccess:o=>{t(!1),n(o.props.contacts)}})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center pb-4",children:[e.jsx("div",{children:e.jsx("h3",{className:"font-bold text-lg text-gray-700 dark:text-gray-300",children:"Confirm to delete the contact"})}),e.jsx("div",{})]}),e.jsxs("form",{onSubmit:l,children:[e.jsx("div",{className:"pb-6",children:e.jsx("p",{className:"",children:"Are you sure to delete this contact?"})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(v,{type:"button",onClick:()=>setDelete(!1),children:"Cancel"}),e.jsx(_,{type:"submit",children:"Delete"})]})})]})]})},(i,a)=>i.contactId===a.contactId),L=({contacts:i,updateList:a})=>{const[t,n]=d.useState(null),[r,l]=d.useState(!1),[c,o]=d.useState(!1),h=i.map(s=>({id:`#${s.id}`,name:s.name,email:s.email,contact_number:s.contact_number,action:e.jsx(g,{actionObject:{edit:{action:()=>{n(s),o(!0)},label:"Edit"},delete:{action:()=>{n(s),l(!0)},label:"Delete"}}})}));return e.jsxs(e.Fragment,{children:[e.jsx(b,{show:c,maxWidth:"md",children:e.jsx(I,{contact:t,updateList:a,setShowEdit:o})}),e.jsx(b,{show:r,maxWidth:"md",children:e.jsx(k,{contactId:t==null?void 0:t.id,updateList:a,setShowDelete:l})}),e.jsx(E,{theadObject:{id:"#",name:"Name",email:"Email",contact_number:"Contact Number",action:""},items:h})]})},K=d.memo(L);function G({auth:i,contacts:a,search_query:t}){const[n,r]=d.useState([]);d.useEffect(()=>{r(a.data)},[]);const l=c=>{r(c.data)};return e.jsxs(S,{user:i.user,header:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(D,{className:"h-5 w-6"}),e.jsx("h3",{className:"font-bold text-sm",children:"Contacts"})]}),children:[e.jsx(C,{title:"Contacts"}),e.jsx(N,{search_query:t,keyProps:"contacts",updateList:l,data:a,CreateForm:F}),e.jsx("div",{className:"h-[calc(100dvh-180px)] overflow-auto -mr-5 pr-3 mt-3",children:e.jsx(K,{contacts:n,updateList:l})})]})}export{G as default};
