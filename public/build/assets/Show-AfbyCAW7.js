import{r as n,W as _,j as e,q as g,a as P}from"./app-nzOvLD-d.js";import{X as B,D as k,A as T}from"./AuthenticatedLayout-Tzv0m-Yu.js";import{M as f,S as C,D as w}from"./DangerButton-B2VfTgUE.js";import{I as j}from"./InputLabel-aj1mze1q.js";import{P as A}from"./PrimaryButton-6wS61PwG.js";import{T as v}from"./TextInput-687EqTop.js";import{A as S,P as D,a as E,E as L,R as F,b as $}from"./QuestionMarkIcon-KARt0TtS.js";import{N as q}from"./NavPanel-KPQFNt9v.js";import{T as I}from"./TableList-9-BxUlsO.js";import{A as M}from"./AddTimeLogForm-3j4mDvGs.js";import{d as W}from"./date-olAZvHKQ.js";import{T as O}from"./TaskStatus-VzwG0QWr.js";import{a as R,b as V}from"./CreateBoardForm-_QB2brrj.js";import"./ErrorInput-5jvALGnN.js";import"./transition--TIntlSB.js";import"./dialog-Xon3Kj8i.js";const X=n.memo(function({boardItem:a,boardUp:t,boardDown:c}){const{patch:d,reset:o}=_({}),[u,x]=n.useState(null),[h,m]=n.useState(!1),[r,l]=n.useState(a.name),y=async(p="up")=>{let N;p==="up"?N=[{board_from_id:a.id},{board_to_id:t.id||a.id}]:N=[{board_from_id:a.id},{board_to_id:c.id||a.id}],await d(route("boards.position",N),{onSuccess:()=>o()})},b=async p=>{p.preventDefault(),await d(route("boards.archive",[{board_id:a.id}]),{onSuccess:()=>o()})},i=async()=>{await d(route("boards.name",[{board_id:a.id,name:r}]),{onSuccess:()=>o()})};return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"w-[75%]",children:u?e.jsxs("div",{className:"flex space-x-2 items-center",children:[e.jsx(v,{value:r,onChange:p=>l(p.target.value),onKeyDown:p=>{p.key==="Enter"&&(x(!1),i())}}),e.jsx("div",{className:"cursor-pointer hover:opacity-75",onClick:()=>{x(!1),l(a.name)},children:e.jsx(B,{})})]}):e.jsx("span",{className:"cursor-pointer",onClick:()=>x(!0),children:r})}),e.jsxs("td",{className:"flex space-x-1",children:[e.jsx("div",{className:`${t?"cursor-pointer hover:opacity-75":"cursor-not-allowed opacity-50"}`,onClick:()=>{t&&y("up")},children:e.jsx(S,{className:"h-6 w-6"})}),e.jsx("div",{className:`${c?"cursor-pointer hover:opacity-75":"cursor-not-allowed opacity-50"}`,onClick:()=>{c&&y("down")},children:e.jsx(S,{className:"h-6 w-6 rotate-180"})}),e.jsx("div",{className:"cursor-pointer hover:opacity-75",onClick:()=>x(!0),children:e.jsx(D,{})}),e.jsx("div",{className:"cursor-pointer hover:opacity-75",onClick:()=>m(!0),children:e.jsx(E,{className:"w-6 h-6 text-red-500 dark:text-red-400"})})]})]}),e.jsx(f,{show:h,maxWidth:"sm",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center pb-4",children:[e.jsx("div",{children:e.jsx("h3",{className:"font-bold text-lg text-gray-700 dark:text-gray-300",children:"Confirm to arvhice the board"})}),e.jsx("div",{})]}),e.jsxs("form",{onSubmit:b,children:[e.jsx("div",{className:"pb-6",children:e.jsx("p",{className:"",children:"All tasks that connected to this board will be archived."})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(C,{type:"button",onClick:()=>m(!1),children:"Cancel"}),e.jsx(w,{type:"submit",children:"Archive"})]})})]})]})})]})}),z=n.memo(function(){const{project_client:a}=g().props,{boards:t}=a;return console.log(t),e.jsx(e.Fragment,{children:e.jsxs("table",{className:"table table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Board Name"}),e.jsx("th",{children:"Position"})]})}),e.jsx("tbody",{children:t.map((c,d)=>e.jsx(X,{boardItem:c,boardUp:t[d-1]||null,boardDown:t[d+1]||null},c.id))})]})})}),G=()=>{const{project_client:s,client:a,acronym:t}=g().props,{data:c,setData:d}=_({project_name:s.project_name,description:s.description});return e.jsx("div",{className:"h-[calc(100dvh-165px)] overflow-y-auto -mr-5",children:e.jsxs("div",{className:"w-full space-y-5 pl-1 pr-5",children:[e.jsxs("section",{className:"border dark:border-gray-700 bg-gray-900 p-4 md:p-6 rounded-md md:grid md:grid-cols-2",children:[e.jsx("header",{className:"pt-2 pb-4 md:pb-0",children:e.jsx("h2",{className:"text-normal md:text-lg font-medium text-gray-900 dark:text-gray-300",children:"General Settings"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{value:"Project Name"}),e.jsx("div",{children:e.jsx(v,{value:c.project_name,onChange:o=>d("project_name",o.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{value:"Description"}),e.jsx("div",{children:e.jsx("textarea",{value:c.description,onChange:o=>d("description",o.target.value),className:"textarea border border-gray-300 dark:border-gray-700 focus:ring-gray-800 focus:outline-none focus:ring-1 focus:border-gray-600 h-44 w-full ",placeholder:"Short note on this client"})})]})]}),e.jsx("div",{className:"flex justify-end border-t border-gray-700 col-span-2 mt-3",children:e.jsx("div",{className:"pt-3",children:e.jsx(A,{children:"Save"})})})]}),e.jsxs("section",{className:"border dark:border-gray-700 bg-gray-900 p-4 md:p-6 rounded-md md:grid md:grid-cols-2",children:[e.jsx("header",{className:"pb-4 md:pb-0",children:e.jsx("h2",{className:"text-normal md:text-lg font-medium text-gray-900 dark:text-gray-300",children:"Boards"})}),e.jsx("div",{className:"space-y-4",children:e.jsx(z,{})})]}),e.jsxs("section",{className:"border dark:border-gray-700 bg-gray-900 p-4 md:p-6 rounded-md md:grid md:grid-cols-2",children:[e.jsx("header",{className:"pb-4 md:pb-0",children:e.jsx("h2",{className:"text-normal md:text-lg font-medium text-gray-900 dark:text-gray-300",children:"Client Information"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{value:"Client Name"}),e.jsx("div",{children:e.jsx(v,{disabled:!0,value:a.name})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{value:"Project Acronym"}),e.jsx("div",{children:e.jsx(v,{disabled:!0,value:t==null?void 0:t.acronym})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{value:"Current Position"}),e.jsx("div",{children:e.jsx(v,{disabled:!0,value:a.position})})]})]}),e.jsx("div",{className:"flex justify-end col-span-2 mt-5 border-t border-gray-700",children:e.jsx("div",{className:"pt-3",children:e.jsx("button",{className:"px-3 py-2 rounded-md font-bold text-xs border shadow-md uppercase border-gray-300 dark:border-gray-600",children:"View Details"})})})]}),e.jsxs("section",{className:"border dark:border-gray-700 bg-gray-900 p-4 md:p-6 rounded-md md:flex md:justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-300",children:"Archive Project?"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"It will hide on the project list and hide all tasks that connected to this project."})]}),e.jsx("div",{className:"pt-3 md:pt-0 text-balance",children:e.jsx(w,{children:"Archived"})})]}),e.jsxs("section",{className:"border dark:border-gray-700 bg-gray-900 p-4 md:p-6 rounded-md md:flex md:justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-300",children:"Delete Project?"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"All tasks that connected on this project will be deleted."})]}),e.jsx("div",{className:"pt-3 md:pt-0 text-balance",children:e.jsx(w,{children:"Delete"})})]})]})})},H=({task:s,setShow:a})=>{var b;const{project_client:t}=g().props,{acronym:c,acronym_counter:d}=s,[o,u]=n.useState(!1),{boards:x}=t,{data:h,setData:m,put:r,reset:l}=_({name:"",description:"",board_id:(b=x[0])==null?void 0:b.id,client_project_id:t==null?void 0:t.id,client_id:s.client_id,priority_level:0,is_archived:!1,created_at:null});n.useEffect(()=>{m({name:s.name,description:s.description,board_id:s.board_id,priority_level:s.priority_level,is_archived:s==null?void 0:s.is_archived,created_at:s.created_at})},[]);const y=async i=>{i.preventDefault(),r(route("tasks.update",{id:s.id}),{onSuccess:()=>{l(),a(!1)}})};return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"",children:[e.jsxs("header",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold",children:["#",`${c}-${d}`]}),e.jsxs("h6",{className:"text-xs flex items-center",children:[t.project_name,e.jsx("svg",{viewBox:"0 0 2 2",className:"h-1 w-1 fill-current mx-1",children:e.jsx("circle",{cx:1,cy:1,r:1})}),W(s.updated_at)]})]}),e.jsx("div",{className:"",children:e.jsx(k,{actionObject:{view:{action:()=>{u(!0)},label:"Archive"}},childIcon:e.jsx(L,{className:"cursor-pointer rotate-90 h-6 w-6"})})})]}),e.jsxs("form",{className:"space-y-6 pt-6",onSubmit:y,children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{value:"Board Position"}),e.jsx("div",{children:e.jsx("select",{value:h.board_id,onChange:i=>m("board_id",i.target.value),className:"bg-[var(--fallback-b1,oklch(var(--b1)/var(--tw-bg-opacity)))] text-sm rounded-md",children:x.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))})})]}),e.jsxs("div",{className:"space-y-2 w-44",children:[e.jsx(j,{value:"Priority Level"}),e.jsx("div",{children:e.jsxs("select",{value:h.priority_level,onChange:i=>m("priority_level",i.target.value),className:"bg-[var(--fallback-b1,oklch(var(--b1)/var(--tw-bg-opacity)))] text-sm rounded-md w-full",children:[e.jsx("option",{value:"0",children:"None"}),e.jsx("option",{value:"1",children:"Low"}),e.jsx("option",{value:"2",children:"Medium"}),e.jsx("option",{value:"3",children:"High"})]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{value:"Task"}),e.jsx("div",{children:e.jsx(v,{value:h.name,onChange:i=>m("name",i.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{value:"Date Created"}),e.jsx("div",{children:e.jsx(v,{type:"date",value:h.created_at,onChange:i=>m("created_at",i.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{value:"Description"}),e.jsx("div",{children:e.jsx("textarea",{rows:5,value:h.description,onChange:i=>m("description",i.target.value),className:"textarea border resize-none border-gray-300 dark:border-gray-700 focus:ring-gray-800 focus:outline-none focus:ring-1 focus:border-gray-600 w-full ",placeholder:"Short description"})})]}),e.jsx("div",{className:"border-t border-gray-400 dark:border-gray-700 flex justify-end pt-4",children:e.jsxs("div",{className:"",children:[e.jsx(C,{onClick:()=>a(!1),type:"button",children:"Cancel"}),e.jsx(A,{type:"submit",children:"Save"})]})})]})]}),e.jsx(f,{show:o,maxWidth:"md",children:e.jsx(M,{setShow:u})})]})},K=()=>{const{tasks:s,search_query_task:a}=g().props,[t,c]=n.useState([]),[d,o]=n.useState(null),[u,x]=n.useState(!1);n.useEffect(()=>{c(s.data)},[]);const h=r=>{c(r.data)},m=s.data.map(r=>({id:`${r.acronym}-${r.counter}`,name:e.jsx("p",{className:"line-clamp-1",children:r.name}),priority_level:r.priority_level,status:e.jsx(O,{status:r.task_status}),action:e.jsx(k,{actionObject:{edit:{action:()=>{o(r),x(!0)},label:"Edit"},view:{action:()=>{window.location.href=route("tasks.show",{id:r.id})},label:"View"}}})}));return e.jsxs(e.Fragment,{children:[e.jsx(q,{keyProps:"tasks",updateList:h,data:s,disableCreate:!0,search_query:a,routeControl:"projects.show",search_query_key:"search_query_task"}),e.jsx("div",{className:"h-[calc(100dvh-200px)] overflow-auto -mr-5 pr-3",children:e.jsx(I,{theadObject:{acronym_id:"#",name:"Name",priority_level:"Priority Level",status:"Status",action:""},items:m,indexPrio:1})}),e.jsx(f,{show:u,children:e.jsx(H,{task:d,setShow:x})})]})},xe=({auth:s,project_client:a})=>{const{boards:t}=a,[c,d]=n.useState(!1),[o,u]=n.useState(!1),[x,h]=n.useState([{name:"Tasks",code:"task",current:!0},{name:"Settings",code:"detail",current:!1}]),m=[{name:a.project_name,href:route("projects.show",{id:a.id}),current:!0}],r=x.find(l=>l.current);return e.jsxs(e.Fragment,{children:[e.jsx(P,{title:a.project_name}),e.jsxs(T,{user:s.user,header:e.jsxs("nav",{className:"flex justify-between items-center","aria-label":"Breadcrumb",children:[e.jsx("div",{children:e.jsxs("ol",{role:"list",className:"flex items-center space-x-4",children:[e.jsx("li",{children:e.jsx("div",{children:e.jsxs("a",{href:`${route("projects.index")}`,className:"text-gray-400 hover:text-gray-500 flex items-center text-sm font-medium",children:[e.jsx(F,{className:"h-5 w-5 flex-shrink-0 mr-3","aria-hidden":"true"}),e.jsx("span",{className:"sr-only",children:"Projects"}),"Projects"]})})}),m.map(l=>e.jsx("li",{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-5 w-5 flex-shrink-0 text-gray-300",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:e.jsx("path",{d:"M5.555 17.776l8-16 .894.448-8 16-.894-.448z"})}),e.jsx("a",{href:l.href,className:"ml-4 text-sm font-bold antialiased text-gray-500 hover:text-gray-700","aria-current":l.current?"page":void 0,children:l.name})]})},l.name))]})}),e.jsx("div",{children:e.jsx(k,{actionObject:{createTask:{action:()=>d(!0),label:"Add New Task",disabled:t.length===0},view:{action:()=>{u(!0)},label:"Add New Board"}},childIcon:e.jsx($,{className:"cursor-pointer rotate-90 h-6 w-6"})})})]}),children:[e.jsx("div",{className:"pb-4",children:e.jsx("div",{className:"border-b border-gray-500 dark:border-gray-500",children:e.jsx("nav",{className:"-mb-px flex space-x-3","aria-label":"Tabs",children:x.map(l=>e.jsx("a",{href:"#",onClick:y=>{y.preventDefault(),h(b=>b.map(i=>({...i,current:l.code===i.code})))},className:`${l.current?"border-teal-600 text-gray-600 dark:text-gray-300 font-bold":"border-transparent hover:border-teal-600 hover:text-gray-300"} group inline-flex items-center border-b-2 py-2 px-1 text-sm font-medium`,children:e.jsx("span",{children:l.name})},l.code))})})}),(r==null?void 0:r.code)==="task"&&e.jsx(K,{}),(r==null?void 0:r.code)==="detail"&&e.jsx(G,{})]}),e.jsx(f,{show:c,maxWidth:"sm",children:e.jsx(R,{setShow:d})}),e.jsx(f,{show:o,maxWidth:"sm",children:e.jsx(V,{setShow:u})})]})};export{xe as default};
