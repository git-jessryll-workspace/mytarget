import{r as x,q as y,W as g,j as e}from"./app-Go47YkBo.js";import{I as n}from"./InputLabel-kjv6hQj2.js";import{S as b,D as S,M as T}from"./DangerButton-Z8_U0IZp.js";import{P as C}from"./PrimaryButton-2NoDDqEk.js";import{T as p}from"./TextInput-RX5XYjsv.js";import{d as D}from"./date-olAZvHKQ.js";import{D as A}from"./AuthenticatedLayout-2zntfMbU.js";import{E as F}from"./useLocalStorage-q-DAcctf.js";import{S as N}from"./Select-i36x1gN_.js";import{T as k}from"./TextArea-XzW6ZjTe.js";import{E as w}from"./ErrorInput-2CLvZnSt.js";const I=({setShow:s})=>{const{task:c}=y().props,{patch:t}=g(),i=async d=>{d.preventDefault(),t(route("tasks.archive",{id:c.id}),{onSuccess:()=>s(!1)})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center pb-4",children:[e.jsx("div",{children:e.jsx("h3",{className:"font-bold text-lg text-gray-700 dark:text-gray-300",children:"Confirm to archive the task"})}),e.jsx("div",{})]}),e.jsxs("form",{onSubmit:i,children:[e.jsx("div",{className:"pb-6",children:e.jsx("p",{className:"",children:"Are you sure to archive this task?"})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(b,{type:"button",onClick:()=>s(!1),children:"Cancel"}),e.jsx(S,{type:"submit",children:"Yes"})]})})]})]})},E=x.memo(I),L=({task:s,setShow:c})=>{var _;const{project_client:t}=y().props;console.log(s);const{acronym:i,acronym_counter:d}=s,j=()=>typeof i=="object"?`#${i.acronym}-${i.counter}`:`#${i}-${d}`,[u,h]=x.useState(!1),{boards:v}=t,{data:l,setData:o,put:f,reset:r}=g({name:"",description:"",board_id:(_=v[0])==null?void 0:_.id,client_project_id:t==null?void 0:t.id,client_id:s.client_id,priority_level:0,is_archived:!1,created_at:null,task_status:"Todo"});x.useEffect(()=>{o({name:s.name,description:s.description,board_id:s.board_id,priority_level:s.priority_level,is_archived:s==null?void 0:s.is_archived,created_at:s.created_at,task_status:s.task_status})},[]);const m=async a=>{a.preventDefault(),f(route("tasks.update",{id:s.id}),{onSuccess:()=>{r(),c(!1)}})};return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"",children:[e.jsxs("header",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:j()}),e.jsxs("h6",{className:"text-xs flex items-center",children:[t.project_name,e.jsx("svg",{viewBox:"0 0 2 2",className:"h-1 w-1 fill-current mx-1",children:e.jsx("circle",{cx:1,cy:1,r:1})}),D(s.updated_at)]})]}),e.jsx("div",{className:"",children:e.jsx(A,{actionObject:{view:{action:()=>{h(!0)},label:"Archive"}},childIcon:e.jsx(F,{className:"cursor-pointer rotate-90 h-8 w-8"})})})]}),e.jsxs("form",{className:"space-y-6 pt-6",onSubmit:m,children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"space-y-2 w-44",children:[e.jsx(n,{value:"Priority Level"}),e.jsx("div",{children:e.jsx(N,{value:l.priority_level,onChange:a=>o("priority_level",a.target.value),options:[{value:"None",text:"None"},{value:"Low",text:"Low"},{value:"Medium",text:"Medium"},{value:"High",text:"High"}]})})]}),e.jsxs("div",{className:"space-y-2 w-44",children:[e.jsx(n,{value:"Priority Level"}),e.jsx("div",{children:e.jsx(N,{value:l.task_status,onChange:a=>o("task_status",a.target.value),options:[{value:"Todo",text:"Todo"},{value:"In Progress",text:"In Progress"},{value:"Done",text:"Done"},{value:"Backlog",text:"Backlog"},{value:"Canceled",text:"Canceled"}]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{value:"Task"}),e.jsx("div",{children:e.jsx(p,{value:l.name,onChange:a=>o("name",a.target.value)})})]}),e.jsx("div",{className:"flex items-center justify-between space-x-3",children:e.jsxs("div",{className:"space-y-2 w-full",children:[e.jsx(n,{value:"Date Created"}),e.jsx("div",{children:e.jsx(p,{type:"date",value:l.created_at,onChange:a=>o("created_at",a.target.value)})})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{value:"Description"}),e.jsx("div",{children:e.jsx(k,{rows:5,value:l.description,onChange:a=>o("description",a.target.value),placeholder:"Short description"})})]}),e.jsx("div",{className:"border-t border-gray-400 dark:border-gray-700 flex justify-end pt-4",children:e.jsxs("div",{className:"",children:[e.jsx(b,{onClick:()=>c(!1),type:"button",children:"Cancel"}),e.jsx(C,{type:"submit",children:"Save"})]})})]})]}),e.jsx(T,{show:u,maxWidth:"md",children:e.jsx(E,{setShow:h})})]})},O=L,Y=x.memo(function({setShowAddTimeLog:c}){const{task:t}=y().props,{data:i,setData:d,post:j,errors:u,reset:h}=g({time_log:"",created_at:null,body:"",task_id:t.id,client_project_id:t.client_project_id}),[v,l]=x.useState(null),o=async r=>{r.preventDefault(),j(route("task_time_logs.store",{onSuccess:m=>{h()},onError:m=>{console.error(m)}})),c(!1)};function f(r){return/^(\d+h)?(\s*\d+m)?$/.test(r)?(console.log("Valid time format!"),!0):(console.log("Invalid time format. Please use the format 'h hours m minutes', e.g., 3h 5m."),!1)}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"",children:e.jsx("h3",{className:"leading-6 font-semibold",children:"Add Time Log"})}),e.jsxs("form",{className:"space-y-4 mt-5",onSubmit:o,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{value:"Time Log"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(p,{value:i.time_log,onChange:r=>{d("time_log",r.target.value),f(r.target.value)?l(null):l("invalid")}}),e.jsx(w,{errors:u,errorKey:"time_log"}),v&&e.jsx("p",{className:"text-error text-xs",children:"Invalid input time log"}),e.jsx("p",{className:"text-xs italic",children:"Required format h=hour m=minutes. example 3h 5m equevalent of 3hours and 5minutes."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{value:"Body"}),e.jsxs("div",{children:[e.jsx("textarea",{value:i.body,onChange:r=>d("body",r.target.value),className:"textarea border border-gray-300 dark:border-gray-700 focus:ring-gray-800 focus:outline-none focus:ring-1 focus:border-gray-600 h-24 w-full ",placeholder:"short description of your time log"}),e.jsx(w,{errors:u,errorKey:"body"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{value:"Date"}),e.jsx("div",{children:e.jsx(p,{type:"date"})})]}),e.jsx("div",{className:"border-t border-gray-300 dark:border-gray-500 flex space-x-2 justify-end",children:e.jsxs("div",{className:"flex space-x-2 mt-4",children:[e.jsx(b,{onClick:()=>c(!1),children:"Cancel"}),e.jsx(C,{disabled:v,children:"Save"})]})})]})]})});export{E as A,O as U,Y as a};
