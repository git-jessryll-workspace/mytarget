import{j as e,q as h,r as o,W as C,b as g,a as k}from"./app-pnw_1hoo.js";import{D as v,A as L,Q as D}from"./AuthenticatedLayout-fI5SoyNf.js";import{C as P}from"./ChevronRightIcon-Nu5v_C9d.js";import"./Bars3Icon-cCr0DFmb.js";import{N as b,T as _}from"./TableList-SCR7WvZN.js";import{d as N}from"./date-olAZvHKQ.js";import{E as S,D as q,C as E}from"./DeleteProjectForm-Y1TFOuyi.js";import{C as F}from"./CreateBoardForm-V5LVkSrG.js";import{S as w,M as f,D as T}from"./DangerButton-fMpvN226.js";import{I as j}from"./InputLabel-B3C7sjFb.js";import{P as $}from"./PrimaryButton-kmqNyWuS.js";import{T as y}from"./TextInput-pmi6S2fY.js";import"./DeleteClientForm-Tl58pdnb.js";import"./transition-CELxIJuG.js";import"./dialog-K8KWdwvm.js";import"./ErrorInput-_wli_qqs.js";const I=({priority_level:r})=>({3:e.jsx("span",{className:"bg-red-500 text-white px-2 py-1 rounded-full text-xs uppercase font-bold",children:"High"}),2:e.jsx("span",{className:"bg-yellow-600 text-white px-2 py-1 rounded-full text-xs uppercase font-bold",children:"Medium"}),1:e.jsx("span",{className:"bg-gray-500 px-2 py-1 rounded-full text-xs uppercase font-bold",children:"Low"}),0:null})[r],O=({task:r,setShow:n})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-b border-gray-400 dark:border-gray-300 pb-2",children:e.jsx("h3",{className:"text-xl font-bold",children:"Task"})}),e.jsxs("div",{className:"pt-6 flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:r.name}),e.jsx("h5",{className:"text-sm",children:r.project_name})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{children:e.jsx(I,{priority_level:r.priority_level})})})]}),e.jsx("div",{className:"pt-3 h-[50dvh] overflow-y-auto",children:e.jsx("div",{className:"text-left text-sm",dangerouslySetInnerHTML:{__html:r.description}})}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx("div",{children:e.jsx(w,{onClick:()=>n(!1),children:"Close"})})})]}),A=()=>{const{projects:r,search_query_project:n}=h().props,[c,i]=o.useState([]),[s,a]=o.useState(null),[m,d]=o.useState(!1),[x,p]=o.useState(!1);o.useEffect(()=>{i(r.data)},[]);const l=u=>{i(u.data)},t=c.map(u=>({id:`#${u.id}`,project_name:u.project_name,updated_date:N(u.updated_at),status:u.active===1?"Active":"Inactive",action:e.jsx(v,{actionObject:{edit:{action:()=>{a(u),d(!0)},label:"Edit"},delete:{action:()=>{a(u),p(!0)},label:"Delete"}}})}));return e.jsxs(e.Fragment,{children:[e.jsx(f,{show:m,maxWidth:"md",children:e.jsx(S,{updateList:l,project:s,setShowEdit:d,skipClientSelect:!0})}),e.jsx(f,{show:x,maxWidth:"md",children:e.jsx(q,{updateList:l,projectId:s==null?void 0:s.id,setShowDelete:p})}),e.jsxs("div",{className:"pt-6",children:[e.jsx(b,{keyProps:"projects",updateList:l,data:r,CreateForm:E,search_query:n,routeControl:"clients.show",search_query_key:"search_query_project"}),e.jsx("div",{className:"h-[calc(100dvh-290px)] overflow-y-auto -mr-5 pr-3 mt-3 overflow-x-auto",children:e.jsx(_,{theadObject:{id:"#",project_name:"Project Name",updated_date:"Updated Date",status:"Status",action:""},items:t})})]})]})},M=A,W=({contactId:r,setShowDelete:n,updateList:c})=>{console.log(r);const{client:i}=h().props,{setData:s,delete:a,reset:m}=C({client_id:i==null?void 0:i.id,contact_id:r}),d=x=>{x.preventDefault(),a(route("client_contacts.destroy"),{onSuccess:p=>{c(p.props.contacts),n(!1),m()}})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center pb-4",children:[e.jsx("div",{children:e.jsx("h3",{className:"font-bold text-lg text-gray-700 dark:text-gray-300",children:"Confirm to delete the contact"})}),e.jsx("div",{})]}),e.jsxs("form",{onSubmit:d,children:[e.jsx("div",{className:"pb-6",children:e.jsx("p",{className:"",children:"Are you sure to delete this contact?"})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(w,{type:"button",onClick:()=>n(!1),children:"Cancel"}),e.jsx(T,{type:"submit",children:"Delete"})]})})]})]})},V=({updateList:r,setShowCreate:n})=>{const{client:c,contacts:i}=h().props,{data:s,setData:a,post:m,reset:d}=C({contact_id:null,client_id:null,name:"",email:"",contact_number:""}),[x,p]=o.useState([]);o.useEffect(()=>{const t=async()=>await g.get(route("utils.contacts.select",{client_id:c==null?void 0:c.id})).then(u=>{u.status===200&&p(u.data.contacts)});a("client_id",c==null?void 0:c.id),t()},[]);const l=t=>{t.preventDefault(),m(route("client_contacts.store"),{onSuccess:u=>{r(u.props.contacts),n(!1),d()}})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:e.jsx("h3",{className:"font-bold text-lg text-gray-700 dark:text-gray-300",children:"Add Client Contact"})}),e.jsx("div",{})]}),e.jsxs("form",{className:"space-y-4 pt-4",onSubmit:l,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{value:"Contact"}),e.jsx("div",{children:e.jsx(F,{items:x,keySearch:"name",cbSelected:t=>{a({...s,contact_id:t==null?void 0:t.id,name:t==null?void 0:t.name,email:t==null?void 0:t.email,contact_number:t==null?void 0:t.contact_number})}})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{value:"Name"}),e.jsx("div",{children:e.jsx(y,{disabled:!0,id:"name",name:"name",type:"text",value:s.name,onChange:t=>a("name",t.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{value:"Email"}),e.jsx("div",{children:e.jsx(y,{disabled:!0,id:"email",name:"email",type:"email",value:s.email,onChange:t=>a("email",t.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{value:"Contact Number"}),e.jsx("div",{children:e.jsx(y,{disabled:!0,id:"contact_number",name:"contact_number",type:"text",value:s.contact_number,onChange:t=>a("contact_number",t.target.value)})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"space-x-2",children:[e.jsx(w,{type:"button",onClick:()=>n(!1),children:"Cancel"}),e.jsx($,{type:"submit",children:"Submit"})]})})]})]})},B=()=>{const{contacts:r,search_query_contact:n}=h().props,[c,i]=o.useState([]),[s,a]=o.useState(null),[m,d]=o.useState(!1);o.useEffect(()=>{i(r.data)},[]);const x=l=>{i(l.data)},p=c.map(l=>({id:`#${l.id}`,name:l.name,email:l.email,contact_number:l.contact_number,created_at:N(l.created_at),action:e.jsx(v,{actionObject:{delete:{action:()=>{a(l),d(!0)},label:"Delete"}}})}));return console.log(s),e.jsxs(e.Fragment,{children:[e.jsx(f,{show:m,children:e.jsx(W,{contactId:s==null?void 0:s.contact_id,updateList:x,setShowDelete:d})}),e.jsxs("div",{className:"pt-6",children:[e.jsx(b,{keyProps:"contacts",updateList:x,data:r,CreateForm:V,search_query:n,routeControl:"clients.show",search_query_key:"search_query_contact"}),e.jsx("div",{className:"h-[calc(100dvh-290px)] overflow-y-auto -mr-5 pr-3 mt-3 overflow-x-auto",children:e.jsx(_,{theadObject:{contact_id:"#",name:"Name",email:"Email",contact_number:"Contact Number",created_at:"Created at",action:""},items:p})})]})]})},H=B,R=()=>{const{tasks:r,search_query_task:n}=h().props,[c,i]=o.useState([]),[s,a]=o.useState(!1),[m,d]=o.useState(null);o.useEffect(()=>{i(r.data)},[]);const x=t=>{i(t.data)},p={3:e.jsx("span",{className:"bg-red-500 text-white px-2 py-1 rounded-full text-xs uppercase font-bold",children:"High"}),2:e.jsx("span",{className:"bg-yellow-600 text-white px-2 py-1 rounded-full text-xs uppercase font-bold",children:"Medium"}),1:e.jsx("span",{className:"bg-gray-500 px-2 py-1 rounded-full text-xs uppercase font-bold",children:"Low"}),0:null},l=c.map(t=>({id:`#${t.acronym}-${t.counter}`,name:t.name,priority_level:p[t.priority_level],project_name:t.project_name,updated_at:N(t.updated_at),action:e.jsx(v,{actionObject:{view:{action:()=>{window.location.href=`/tasks/${t.id}`},label:"View"}}})}));return e.jsxs(e.Fragment,{children:[e.jsx(f,{show:s,children:e.jsx(O,{task:m,setShow:a})}),e.jsx("div",{className:"pt-6",children:e.jsx(b,{keyProps:"tasks",updateList:x,data:r,disableCreate:!0,search_query:n,routeControl:"clients.show",search_query_key:"search_query_task"})}),e.jsx("div",{className:"h-[calc(100dvh-240px)] overflow-auto -mr-5 pr-3 mt-3",children:e.jsx(_,{theadObject:{acronym_id:"#",name:"Name",priority_level:"Priority Level",project_name:"Project Name",updated_at:"Date Updated",action:""},items:l})})]})},U=R;function ie({auth:r,client:n}){const[c,i]=o.useState([{name:"Tasks",code:"task",current:!0},{name:"Projects",code:"project",current:!1},{name:"Contacts",code:"contact",current:!1}]);o.useEffect(()=>{const a=new URLSearchParams(window.location.search);console.log(a.size),a.size!==0&&i(m=>m.map(d=>({...d,current:a.has(`search_query_${d.code}`)})))},[]);const s=c.find(a=>a.current);return e.jsxs(e.Fragment,{children:[e.jsx(k,{title:n.name}),e.jsxs(L,{user:r.user,header:e.jsxs("div",{className:"flex space-x-1",children:[e.jsxs("div",{className:"flex space-x-2 cursor-pointer",onClick:()=>window.location.href=route("clients.index"),children:[e.jsx(D,{}),e.jsx("h3",{className:"font-semibold text-lg",style:{letterSpacing:"0.5px"},children:"Clients"})]}),e.jsxs("div",{className:"flex",children:[e.jsx(P,{className:"w-5 h-5 mt-1 mr-1"}),e.jsx("h3",{className:"font-bold text-xl",style:{letterSpacing:"0.5px"},children:n.name})]})]}),children:[e.jsx("div",{children:e.jsx("div",{className:"border-b border-gray-500 dark:border-gray-500",children:e.jsx("nav",{className:"-mb-px flex space-x-3","aria-label":"Tabs",children:c.map(a=>e.jsx("a",{href:"#",onClick:m=>{m.preventDefault(),i(d=>d.map(x=>({...x,current:a.code===x.code})))},className:`${a.current?"border-teal-600 text-gray-600 dark:text-gray-300 font-bold":"border-transparent hover:border-teal-600 hover:text-gray-300"} group inline-flex items-center border-b-2 py-2 px-1 text-sm font-medium`,children:e.jsx("span",{children:a.name})},a.code))})})}),(s==null?void 0:s.code)==="project"&&e.jsx(M,{}),(s==null?void 0:s.code)==="contact"&&e.jsx(H,{}),(s==null?void 0:s.code)==="task"&&e.jsx(U,{})]})]})}export{ie as default};
