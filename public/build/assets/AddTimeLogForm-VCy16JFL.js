import{r as u,q as g,W as b,j as e}from"./app-I37UwJ8Q.js";import{I as c}from"./InputLabel-wp07J9qd.js";import{S as _,D as S,M as T}from"./DangerButton-nVdXsmnN.js";import{P as C}from"./PrimaryButton-bxyMUJE_.js";import{T as j}from"./TextInput-6ikZNGhg.js";import{d as D}from"./date-olAZvHKQ.js";import{D as k}from"./AuthenticatedLayout-_LED3Hsy.js";import{E as A}from"./QuestionMarkIcon-R6bz2KD4.js";import{T as F}from"./TextArea-g7yk2gnD.js";import{E as w}from"./ErrorInput-XJQb45Yl.js";const B=({setShow:s})=>{const{task:i}=g().props,{patch:t}=b(),l=async d=>{d.preventDefault(),t(route("tasks.archive",{id:i.id}),{onSuccess:()=>s(!1)})};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center pb-4",children:[e.jsx("div",{children:e.jsx("h3",{className:"font-bold text-lg text-gray-700 dark:text-gray-300",children:"Confirm to archive the task"})}),e.jsx("div",{})]}),e.jsxs("form",{onSubmit:l,children:[e.jsx("div",{className:"pb-6",children:e.jsx("p",{className:"",children:"Are you sure to archive this task?"})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(_,{type:"button",onClick:()=>s(!1),children:"Cancel"}),e.jsx(S,{type:"submit",children:"Yes"})]})})]})]})},E=u.memo(B);function y({options:s,...i}){return e.jsx("select",{...i,className:"dark:bg-[#3d4451] text-sm w-full py-2 px-1 rounded-md border border-gray-300 dark:border-gray-700",children:s.map(t=>e.jsx("option",{value:t.value,children:t.text},t.value))})}const I=({task:s,setShow:i})=>{var N;const{project_client:t}=g().props;console.log(s);const{acronym:l,acronym_counter:d}=s,p=()=>typeof l=="object"?`#${l.acronym}-${l.counter}`:`#${l}-${d}`,[h,v]=u.useState(!1),{boards:m}=t,{data:o,setData:n,put:f,reset:r}=b({name:"",description:"",board_id:(N=m[0])==null?void 0:N.id,client_project_id:t==null?void 0:t.id,client_id:s.client_id,priority_level:0,is_archived:!1,created_at:null,task_status:"Todo"});u.useEffect(()=>{n({name:s.name,description:s.description,board_id:s.board_id,priority_level:s.priority_level,is_archived:s==null?void 0:s.is_archived,created_at:s.created_at,task_status:s.task_status})},[]);const x=async a=>{a.preventDefault(),f(route("tasks.update",{id:s.id}),{onSuccess:()=>{r(),i(!1)}})};return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"",children:[e.jsxs("header",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:p()}),e.jsxs("h6",{className:"text-xs flex items-center",children:[t.project_name,e.jsx("svg",{viewBox:"0 0 2 2",className:"h-1 w-1 fill-current mx-1",children:e.jsx("circle",{cx:1,cy:1,r:1})}),D(s.updated_at)]})]}),e.jsx("div",{className:"",children:e.jsx(k,{actionObject:{view:{action:()=>{v(!0)},label:"Archive"}},childIcon:e.jsx(A,{className:"cursor-pointer rotate-90 h-8 w-8"})})})]}),e.jsxs("form",{className:"space-y-6 pt-6",onSubmit:x,children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"space-y-2 w-44",children:[e.jsx(c,{value:"Priority Level"}),e.jsx("div",{children:e.jsx(y,{value:o.priority_level,onChange:a=>n("priority_level",a.target.value),options:[{value:"None",text:"None"},{value:"Low",text:"Low"},{value:"Medium",text:"Medium"},{value:"High",text:"High"}]})})]}),e.jsxs("div",{className:"space-y-2 w-44",children:[e.jsx(c,{value:"Priority Level"}),e.jsx("div",{children:e.jsx(y,{value:o.task_status,onChange:a=>n("task_status",a.target.value),options:[{value:"Todo",text:"Todo"},{value:"In Progress",text:"In Progress"},{value:"Done",text:"Done"},{value:"Backlog",text:"Backlog"},{value:"Canceled",text:"Canceled"}]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{value:"Task"}),e.jsx("div",{children:e.jsx(j,{value:o.name,onChange:a=>n("name",a.target.value)})})]}),e.jsxs("div",{className:"flex items-center justify-between space-x-3",children:[e.jsxs("div",{className:"space-y-2 w-full",children:[e.jsx(c,{value:"Date Created"}),e.jsx("div",{children:e.jsx(j,{type:"date",value:o.created_at,onChange:a=>n("created_at",a.target.value)})})]}),e.jsxs("div",{className:"space-y-2 w-full",children:[e.jsx(c,{value:"Board Position"}),e.jsx("div",{children:e.jsx(y,{value:o.board_id,onChange:a=>n("board_id",a.target.value),options:m.map(a=>({...a,value:a.id,text:a.name}))})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{value:"Description"}),e.jsx("div",{children:e.jsx(F,{rows:5,value:o.description,onChange:a=>n("description",a.target.value),placeholder:"Short description"})})]}),e.jsx("div",{className:"border-t border-gray-400 dark:border-gray-700 flex justify-end pt-4",children:e.jsxs("div",{className:"",children:[e.jsx(_,{onClick:()=>i(!1),type:"button",children:"Cancel"}),e.jsx(C,{type:"submit",children:"Save"})]})})]})]}),e.jsx(T,{show:h,maxWidth:"md",children:e.jsx(E,{setShow:v})})]})},W=I,O=u.memo(function({setShowAddTimeLog:i}){const{task:t}=g().props,{data:l,setData:d,post:p,errors:h,reset:v}=b({time_log:"",created_at:null,body:"",task_id:t.id,client_project_id:t.client_project_id}),[m,o]=u.useState(null),n=async r=>{r.preventDefault(),p(route("task_time_logs.store",{onSuccess:x=>{v()},onError:x=>{console.error(x)}})),i(!1)};function f(r){return/^(\d+h)?(\s*\d+m)?$/.test(r)?(console.log("Valid time format!"),!0):(console.log("Invalid time format. Please use the format 'h hours m minutes', e.g., 3h 5m."),!1)}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"",children:e.jsx("h3",{className:"leading-6 font-semibold",children:"Add Time Log"})}),e.jsxs("form",{className:"space-y-4 mt-5",onSubmit:n,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{value:"Time Log"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(j,{value:l.time_log,onChange:r=>{d("time_log",r.target.value),f(r.target.value)?o(null):o("invalid")}}),e.jsx(w,{errors:h,errorKey:"time_log"}),m&&e.jsx("p",{className:"text-error text-xs",children:"Invalid input time log"}),e.jsx("p",{className:"text-xs italic",children:"Required format h=hour m=minutes. example 3h 5m equevalent of 3hours and 5minutes."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{value:"Body"}),e.jsxs("div",{children:[e.jsx("textarea",{value:l.body,onChange:r=>d("body",r.target.value),className:"textarea border border-gray-300 dark:border-gray-700 focus:ring-gray-800 focus:outline-none focus:ring-1 focus:border-gray-600 h-24 w-full ",placeholder:"short description of your time log"}),e.jsx(w,{errors:h,errorKey:"body"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{value:"Date"}),e.jsx("div",{children:e.jsx(j,{type:"date"})})]}),e.jsx("div",{className:"border-t border-gray-300 dark:border-gray-500 flex space-x-2 justify-end",children:e.jsxs("div",{className:"flex space-x-2 mt-4",children:[e.jsx(_,{onClick:()=>i(!1),children:"Cancel"}),e.jsx(C,{disabled:m,children:"Save"})]})})]})]})});export{E as A,W as U,O as a};
